name: Verify Contract Paths

on:
  workflow_dispatch:

jobs:
  verify-paths:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: npm install
      
    - name: Show Hardhat configuration
      run: cat hardhat.config.js
      
    - name: List ALL contract files with paths
      run: |
        echo "=== SEARCHING FOR .SOL FILES ==="
        find . -name "*.sol" -type f
        echo "=== SMART-CONTRACTS FOLDER ==="
        ls -la smart-contracts/
        echo "=== CONTRACTS FOLDER ==="
        ls -la smart-contracts/contracts/
        
    - name: Test Hardhat paths command
      run: npx hardhat paths || echo "Hardhat paths command failed"
      
    - name: Verify SimpleTest location
      run: |
        if [ -f "smart-contracts/contracts/SimpleTest.sol" ]; then
          echo "✅ SimpleTest.sol found at correct path!"
        else
          echo "❌ SimpleTest.sol NOT FOUND at expected path!"
        fi